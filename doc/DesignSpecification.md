Ax/Wx - Traffic Accident / Weather Analysis - Design Specification
==================================================================


COMPONENTS
----------
_This section should list the components that you expect to have in your project (not necessarily a complete list), what they do, and how their interfaces (e.g., functions with inputs and outputs). If the component is an existing package, then you should point to a documentation for the package. If the component is something that you'll build, then describe (maybe at a high level) the functions and their inputs and outputs._

#### Getting the latitude and longitude from the weather stations

Use the data scraped previously from weather underground listing the unique station identification. From these data we created a script to obtain the latitude and longitude from these weather stations. The script runs as follows:

- Load the data into python using a panda dataframe.
- We used the urllib3 package to make each URL request.
- The beautiful soup package was used to parse the XML document that was returned from each URL call. 
- Any missing data was filled in with NA's. 

#### WU Personal Weather Station Observation Data Retrieval

For this component we use two functions: `scrape_data_one_day` retrieves data from a single weather station for a single day and outputs the data as a Pandas DataFrame. The function uses the `requests` and `BeautifulSoup` packages. A second function - `scrape_data_multi_day` - acts as a wrapper around the `scrape_data_one_day` function, returning a Pandas DataFrame with observation data from a single station over a range of dates. We will run the `scrape_data_multi_day` function over the list of personal weather stations generated by the PWS list component described above.

#### WU Personal Weather Station Observation Cleanup

For this component we will use a function that takes a Pandas Dataframe from the WU PWS Observation Data Retrieval a single station and cleans it according to various issues identified in the data. The script will also include an aggregation component to reduce the size of the project's weather database.

#### Collision Data - Washington State Patrol (WSP) [Collision Analysis Tool](https://fortress.wa.gov/wsp/collisionanalysistool "CAT") (CAT)

The CAT provides the means to pull collision data that will be utilized in the project. This data can be pulled any time, with any filters (e.g., data ranges, cities, or counties) and can then be passed through the collision data cleanup. The data is provided by the WSP which keeps a detailed database of all reported collisions in Washington State. 

#### Collision Data Cleanup

The raw data includes several attributes that are not pertinent to the project and Ax/Wx visualization tool (217 attributes total). The purpose of the collision data cleanup is to get the data in such a format that it can be merged with the Weather Underground (WU) data and overlayed onto a map. In order to merge the two datasets, a function has been designed to transform the current WSP coordinate system (input) to global latitudes and longitudes (ouput). These new coordinates will be used to merrge the collision data with the weather data.

#### Merge of Collision Data and Weather Data

Using the coordinate mapping for the collision data, the plan is to design a function that takes the latitudes and longitudes as input and finds the nearest weather station information from the weather data. The weather data will be appended to the collision data, providing a new data file that is ready for the visualization process.

#### Visualization of Data

The visualization will consist of a GUI with several plots of the collision/weather data.  There will be descriptive text aids for how to use the tool's interactive features at the top.  Once familiar with the tool, the user can look directly below at applying filters for precip rate, temperature, and date-time and then draw inferences based on their business need.

These interactions can help the user hone in on areas of interest and will update the plots in the GUI.  These will be plots of the following:

- A primary visualization of a city map of Seattle with collisions marked by color based off of collision type (fatality, distraction, impairment, weather induced or pedestrian involvement).  
- A smaller supplementary time-series plot of collision frequency (per hour).
- A smaller supplementary pareto of the number of collisions (per hour) by collision type.

The Python packages that will be utilized for the visualization are listed as follows:

- bokeh - http://bokeh.pydata.org/en/latest/docs/dev_guide/documentation.html
	- The package "bokeh" is a interactive visualization library to help aid presentation by use of advanced custom graphics (such as interactive plots, dashboards, and data applications) in the style of D3.js.   
- folium - https://folium.readthedocs.io/en/latest/
	- The package "folium" is a library with built-in tilesets from OpenStreetMap, Mapbox, and Stamen, supporting GeoJSON and TopoJSON overlays. Overall, it has a strength in map overlays.


INTERACTIONS
------------
_You should have a subsection here for each use case in your functional specification (homework 6). In each subsection, you will describe how the components interact to accomplish the use case._

The majority of the components listed above are preliminary steps required to get the data in such a format that it can easily be viewed by users.

#### Traffic Engineer

<stuff here>

#### Law Enforcement Officer

<stuff here>

#### Insurance Company

<stuff here>

#### Common Driver

<stuff here>


PROJECT PLAN
------------
_Provide details for what you'll accomplish in the next two weeks, and higher level descriptions for the remaining weeks in the quarter so that the end result is that you have implemented and tested a system that accomplishes your use cases._

<stuff here>

